'use strict';var Loader;
(function(l){function q(c){c=c.split("/");const a=[];for(let b=0;b<c.length;++b){const e=c[b];if(0===b||e.length&&"."!==e)".."===e?a.pop():a.push(e)}return a.join("/")}const A={"@singleware/class/helper":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});(function(a){function b(a){if(!r.has(a))return!1;k=r.get(a);r.delete(a);return!0}function f(a,d){if(k.context!==d)return!1;k.context=a;return!0}function d(a){if(a.next=k.next)k.next.previous=a;return k.next=a}function c(a){const d=
a.previous,g=a.next;if(d.next=g)g.previous=d;return a}async function g(a,g,...h){try{k=d(a);const b=g.call(a.context,...h),f=a.previous,c=await b;f.context===a.context&&r.set(a.context,f);return c}catch(t){throw t;}finally{k=c(a).previous}}function h(a,g,...h){try{return k=d(a),g.call(a.context,...h)}catch(t){throw t;}finally{k=c(a).previous}}function n(a,d,f,...b){d={name:f.name,context:a,prototype:d,previous:k,next:void 0};return"AsyncFunction"===f.constructor.name?(a=k,f=g(d,f,...b),k=a,f):h(d,
f,...b)}function u(a,d){let g;return{get:function(){return(g=v.get(this))?g[a]:d},set:function(d){(g=v.get(this))||v.set(this,g={});g[a]=d}}}function w(a,d,g,h){h.enumerable=!1;h.configurable=!1;h.value instanceof Function?(h.writable=!1,a("value",d,g,h)):(h.set instanceof Function&&a("set",d,g,h),h.get instanceof Function&&(h.enumerable=!0,a("get",d,g,h)));return h}function x(a,d,g,h){const c=h[a];h[a]=function(...a){b(this)||f(this,d);return n(this,d,c,...a)}}function y(a,d,g,h){const c=h[a];h[a]=
function(...a){b(this)||f(this,d);const h=d.constructor;if(!k.context||!(k.context instanceof h||k.context.constructor instanceof h))throw new TypeError(`Access to protected member '${g}' has been denied.`);return n(this,d,c,...a)}}function z(a,d,g,h){const c=h[a];h[a]=function(...a){b(this)||f(this,d);if(!k.prototype||k.prototype!==d&&k.prototype.constructor!==d)throw new TypeError(`Access to private member '${g}' has been denied.`);return n(this,d,c,...a)}}function l(a){const d=k.context,g=k.prototype;
if(!d||!g)throw Error("There is no current context.");if(k.context===k.prototype)throw Error("There is no resolved context, please call update() method.");return function(...h){return n(d,g,a,...h)}}function p(a){a=Object.assign({},a);a.value?a.value=l(a.value):(a.get&&(a.get=l(a.get)),a.set&&(a.set=l(a.set)));return a}const v=new WeakMap,r=new WeakMap,q={name:"anonymous",context:void 0,prototype:void 0};var k=q;a.Describe=function(){return(a)=>new Proxy(a,{construct:(a,d,g)=>n(a.prototype,a.prototype,
Reflect.construct,a,d,g)})};a.Public=function(){return(a,d,g)=>w(x,a,d,g||u(d,a[d]))};a.Protected=function(){return(a,d,g)=>w(y,a,d,g||u(d,a[d]))};a.Private=function(){return(a,d,g)=>w(z,a,d,g||u(d,a[d]))};a.trace=function(){const a=[];let d=q;for(;d;)a.push({context:d.prototype?d.prototype.name||d.prototype.constructor.name:"global",method:d.name}),d=d.next;return a};a.update=function(a){if(k.context===k.prototype){if(Object.getPrototypeOf(a)!==k.prototype)throw Error(`The specified instance must be of type "${k.prototype.constructor.name}"`);
k.context=a}};a.call=function(a,...d){return n(void 0,void 0,a,...d)};a.bindCallback=l;a.bindDescriptor=p;a.bind=function(a){return a instanceof Function?l(a):p(a)}})(c.Helper||(c.Helper={}))}},"@singleware/class/index":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});a=a("./helper");c.Describe=a.Helper.Describe;c.Public=a.Helper.Public;c.Protected=a.Helper.Protected;c.Private=a.Helper.Private;c.trace=a.Helper.trace;c.update=a.Helper.update;c.call=a.Helper.call;c.bind=
a.Helper.bind;c.bindCallback=a.Helper.bindCallback;c.bindDescriptor=a.Helper.bindDescriptor}},"@singleware/class":{pack:!0,invoke:function(c,a){Object.assign(c,a("index"))}},"@singleware/injection/index":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});const b=a("./manager");a=a("./manager");c.Manager=a.Manager;const e=new b.Manager;c.Describe=(a)=>e.Describe(a);c.Inject=(...a)=>e.Inject(...a);c.resolve=(a)=>e.resolve(a);c.construct=(a,...d)=>e.construct(a,...d)}},"@singleware/injection":{pack:!0,
invoke:function(c,a){Object.assign(c,a("index"))}},"@singleware/injection/manager":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,d,c,g){var h=arguments.length,b=3>h?d:null===g?g=Object.getOwnPropertyDescriptor(d,c):g,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)b=Reflect.decorate(a,d,c,g);else for(var m=a.length-1;0<=m;m--)if(f=a[m])b=(3>h?f(b):3<h?f(d,c,b):f(d,c))||b;return 3<h&&b&&Object.defineProperty(d,c,b),b};Object.defineProperty(c,"__esModule",
{value:!0});const e=a("@singleware/class");a=class{constructor(){this.instances=new WeakMap;this.dependencies=new WeakMap}Describe(a){return e.bindCallback((d)=>{if(this.dependencies.has(d.prototype))throw new TypeError(`Dependency type ${d.name} is already described.`);this.dependencies.set(d.prototype,a||{})})}Inject(...a){return e.bindCallback((d)=>{const b=this.dependencies;return new Proxy(d,{construct:(d,h,c)=>{const g={};a.map((a)=>{const d=this.resolve(a),h=b.get(a.prototype);g[h.name||a.name]=
d});return Reflect.construct(d,[g,h],c)}})})}resolve(a){var d=this.dependencies.get(a.prototype);if(!d)throw new TypeError(`Dependency type ${a?a.name:void 0} does not exists.`);if(!d.singleton)return new a;(d=this.instances.get(a))||this.instances.set(a,d=new a);return d}construct(a,...d){return new a(...d)}};b([e.Private()],a.prototype,"instances",void 0);b([e.Private()],a.prototype,"dependencies",void 0);b([e.Public()],a.prototype,"Describe",null);b([e.Public()],a.prototype,"Inject",null);b([e.Public()],
a.prototype,"resolve",null);b([e.Public()],a.prototype,"construct",null);a=b([e.Describe()],a);c.Manager=a}},"@singleware/observable/index":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});a=a("./subject");c.Subject=a.Subject}},"@singleware/observable":{pack:!0,invoke:function(c,a){Object.assign(c,a("index"))}},"@singleware/observable/subject":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,b,g,h){var d=arguments.length,c=3>d?b:null===h?h=Object.getOwnPropertyDescriptor(b,
g):h,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(a,b,g,h);else for(var m=a.length-1;0<=m;m--)if(f=a[m])c=(3>d?f(c):3<d?f(b,g,c):f(b,g))||c;return 3<d&&c&&Object.defineProperty(b,g,c),c};Object.defineProperty(c,"__esModule",{value:!0});var e;"use strict";const f=a("@singleware/class");a=e=class{constructor(){this.observers=[]}get length(){return this.observers.length}subscribe(a){if(a instanceof e)for(const d of a.observers)this.observers.push(d);else this.observers.push(a);
return this}contains(a){return-1!==this.observers.indexOf(a)}unsubscribe(a){a=this.observers.indexOf(a);return-1<a?(this.observers.splice(a,1),!0):!1}notifyAllSync(a){for(const d of this.observers)f.call(d,a);return this}async notifyAll(a){for(const d of this.observers)await f.call(d,a);return this}*notifyStep(a){for(const d of this.observers)yield f.call(d,a);return this}};b([f.Protected()],a.prototype,"observers",void 0);b([f.Public()],a.prototype,"length",null);b([f.Public()],a.prototype,"subscribe",
null);b([f.Public()],a.prototype,"contains",null);b([f.Public()],a.prototype,"unsubscribe",null);b([f.Public()],a.prototype,"notifyAllSync",null);b([f.Public()],a.prototype,"notifyAll",null);b([f.Public()],a.prototype,"notifyStep",null);a=e=b([f.Describe()],a);c.Subject=a}},"@singleware/pipeline/index":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});a=a("./subject");c.Subject=a.Subject}},"@singleware/pipeline":{pack:!0,invoke:function(c,a){Object.assign(c,a("index"))}},
"@singleware/pipeline/subject":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,d,b,g){var h=arguments.length,c=3>h?d:null===g?g=Object.getOwnPropertyDescriptor(d,b):g,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(a,d,b,g);else for(var e=a.length-1;0<=e;e--)if(f=a[e])c=(3>h?f(c):3<h?f(d,b,c):f(d,b))||c;return 3<h&&c&&Object.defineProperty(d,b,c),c};Object.defineProperty(c,"__esModule",{value:!0});const e=a("@singleware/class");a=a("@singleware/observable");
a=class extends a.Subject{notifyFirstSync(a){const d=this.observers.shift();d&&e.call(d,a);return this}async notifyFirst(a){const d=this.observers.shift();d&&await e.call(d,a);return this}notifyLastSync(a){const d=this.observers.pop();d&&e.call(d,a);return this}async notifyLast(a){const d=this.observers.pop();d&&await e.call(d,a);return this}};b([e.Public()],a.prototype,"notifyFirstSync",null);b([e.Public()],a.prototype,"notifyFirst",null);b([e.Public()],a.prototype,"notifyLastSync",null);b([e.Public()],
a.prototype,"notifyLast",null);a=b([e.Describe()],a);c.Subject=a}},"@singleware/routing/index":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});var b=a("./match");c.Match=b.Match;a=a("./router");c.Router=a.Router}},"@singleware/routing":{pack:!0,invoke:function(c,a){Object.assign(c,a("index"))}},"@singleware/routing/match":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,d,c,g){var h=arguments.length,b=3>h?d:null===g?g=Object.getOwnPropertyDescriptor(d,
c):g,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)b=Reflect.decorate(a,d,c,g);else for(var e=a.length-1;0<=e;e--)if(f=a[e])b=(3>h?f(b):3<h?f(d,c,b):f(d,c))||b;return 3<h&&b&&Object.defineProperty(d,c,b),b};Object.defineProperty(c,"__esModule",{value:!0});a=a("@singleware/class");let e=class{constructor(a,d,b,g,h){this.matchPath=a;this.matchEvents=h;this.matchVariables=b;this.currentVariables=b.find(()=>!0);this.remainingPath=d;this.extraDetails=g}get length(){return this.matchEvents.length}get path(){return this.matchPath}get remaining(){return this.remainingPath}get variables(){return this.currentVariables||
{}}get detail(){return this.extraDetails}get exact(){return 0===this.remainingPath.length}nextSync(){this.currentVariables=this.matchVariables.shift();this.matchEvents.notifyFirstSync(this);return this}async next(){this.currentVariables=this.matchVariables.shift();await this.matchEvents.notifyFirst(this);return this}};b([a.Private()],e.prototype,"matchPath",void 0);b([a.Private()],e.prototype,"matchEvents",void 0);b([a.Private()],e.prototype,"matchVariables",void 0);b([a.Private()],e.prototype,"currentVariables",
void 0);b([a.Private()],e.prototype,"remainingPath",void 0);b([a.Private()],e.prototype,"extraDetails",void 0);b([a.Public()],e.prototype,"length",null);b([a.Public()],e.prototype,"path",null);b([a.Public()],e.prototype,"remaining",null);b([a.Public()],e.prototype,"variables",null);b([a.Public()],e.prototype,"detail",null);b([a.Public()],e.prototype,"exact",null);b([a.Public()],e.prototype,"nextSync",null);b([a.Public()],e.prototype,"next",null);e=b([a.Describe()],e);c.Match=e}},"@singleware/routing/router":{pack:!1,
invoke:function(c,a){var b=this&&this.__decorate||function(a,d,b,c){var g=arguments.length,h=3>g?d:null===c?c=Object.getOwnPropertyDescriptor(d,b):c,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,d,b,c);else for(var e=a.length-1;0<=e;e--)if(f=a[e])h=(3>g?f(h):3<g?f(d,b,h):f(d,b))||h;return 3<g&&h&&Object.defineProperty(d,b,h),h};Object.defineProperty(c,"__esModule",{value:!0});const e=a("@singleware/class"),f=a("@singleware/observable"),d=a("@singleware/pipeline"),
m=a("./match");a=class{constructor(a){this.entries={};this.counter=0;this.settings=a}splitPath(a){a=a.split(this.settings.separator);const d=[];for(const g of a)if(g.length){let a;(a=g.match(this.settings.variable))&&a[0].length===g.length?d.push(a[1]||a[0]):d.push(`${this.settings.separator}${g}`)}d.length||d.push(this.settings.separator);return d}createEntry(a,d){return{pattern:a,variable:d,entries:{},environments:{exact:{},default:{}},onExactMatch:new f.Subject,onMatch:new f.Subject}}insertEntries(a,
d){let g=this.entries,b;for(let c of a){let a,h;if(-1===c.indexOf(this.settings.separator)){if(!(h=d[a=c]))throw Error(`Constraint rules for the variable "${a}" was not found.`);c=h.toString()}(b=g[c])||(g[c]=b=this.createEntry(h,a),++this.counter);g=b.entries}return b}searchEntries(a,d){const g={directories:[],entries:[],variables:{}},b=a.substr(this.settings.separator.length);for(const c in d){const h=d[c];if(h.pattern&&h.variable){let a;(a=b.match(h.pattern))&&a[0].length===b.length&&(g.variables[h.variable]=
b,g.entries.push(h))}else c===a&&g.entries.push(h)}return g}collectEntries(a){let d={directories:[],entries:[],variables:{}};for(var g=[this.entries];a.length&&g.length;){const b=a[0],c=[],h=[];let f={};for(const a of g){g=this.searchEntries(b,a);f=Object.assign({},g.variables,f);for(const a of g.entries)h.push(a),c.push(a.entries)}g=c;h.length&&(d.entries=h,d.variables=Object.assign({},f,d.variables),d.directories.push(a.shift()))}return d}get length(){return this.counter}add(...a){for(const d of a)a=
this.splitPath(d.path),a=this.insertEntries(a,d.constraint||{}),d.exact?(a.onExactMatch.subscribe(d.onMatch),a.environments.exact=Object.assign({},d.environment,a.environments.exact)):(a.onMatch.subscribe(d.onMatch),a.environments.default=Object.assign({},d.environment,a.environments.default));return this}match(a,b){var g=this.splitPath(a);a=this.collectEntries(g);a.entries.length||(a.directories.push(this.settings.separator),this.entries[this.settings.separator]&&a.entries.push(this.entries[this.settings.separator]));
const c=new d.Subject,h=[];g=g.join("");const f=a.directories.join("");for(const d of a.entries)d.onExactMatch.length&&0===g.length&&(c.subscribe(d.onExactMatch),h.push(Object.assign({},a.variables,d.environments.exact))),d.onMatch.length&&(c.subscribe(d.onMatch),h.push(Object.assign({},a.variables,d.environments.default)));return new m.Match(f,g,h,b,c)}clear(){this.entries={};this.counter=0;return this}};b([e.Private()],a.prototype,"entries",void 0);b([e.Private()],a.prototype,"counter",void 0);
b([e.Private()],a.prototype,"settings",void 0);b([e.Private()],a.prototype,"splitPath",null);b([e.Private()],a.prototype,"createEntry",null);b([e.Private()],a.prototype,"insertEntries",null);b([e.Private()],a.prototype,"searchEntries",null);b([e.Private()],a.prototype,"collectEntries",null);b([e.Public()],a.prototype,"length",null);b([e.Public()],a.prototype,"add",null);b([e.Public()],a.prototype,"match",null);b([e.Public()],a.prototype,"clear",null);a=b([e.Describe()],a);c.Router=a}},"@singleware/application/index":{pack:!1,
invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});a=a("./main");c.Main=a.Main;c.Filter=c.Main.Filter;c.Processor=c.Main.Processor}},"@singleware/application":{pack:!0,invoke:function(c,a){Object.assign(c,a("index"))}},"@singleware/application/main":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,d,b,c){var g=arguments.length,h=3>g?d:null===c?c=Object.getOwnPropertyDescriptor(d,b):c,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,
d,b,c);else for(var e=a.length-1;0<=e;e--)if(f=a[e])h=(3>g?f(h):3<g?f(d,b,h):f(d,b))||h;return 3<g&&h&&Object.defineProperty(d,b,h),h};Object.defineProperty(c,"__esModule",{value:!0});var e;"use strict";const f=a("@singleware/class"),d=a("@singleware/routing"),m=a("@singleware/injection");a=e=class{constructor(a){this.dependencies=new m.Manager;this.services=[];this.started=!1;this.receiveHandler=f.bindCallback(async(a)=>{this.protectRequest(a);const d=this.processors.match(a.path,a),g=a.environment;
do{const b=this.filters.match(a.path,a);a.environment=Object.assign({},d.variables,g);a.granted=0===b.length;await b.next();await d.next()}while(d.length)});this.sendHandler=f.bindCallback(async(a)=>{});a={separator:a.separator,variable:a.variable};this.filters=new d.Router(a);this.processors=new d.Router(a)}async filter(a,d){!1!==(a.detail.granted=await d(a))&&await a.next()}async process(a,d){a.detail.granted&&await d(a)}protectRequest(a){Object.defineProperties(a,{path:{value:a.path,writable:!1,
configurable:!1},input:{value:a.input,writable:!1,configurable:!1},output:{value:a.output,writable:!1,configurable:!1}})}getRoute(a,d,b){return{path:a.path,exact:void 0===a.exact?d:a.exact,constraint:a.constraint,environment:a.environment,onMatch:f.bindCallback(b)}}addFilter(a,d,...b){this.filters.add(this.getRoute(a.action,!1,async(c)=>{const g=this.construct(d,...b);await this.filter(c,g[a.method].bind(g))}))}addProcessor(a,d,...b){this.processors.add(this.getRoute(a.action,!0,async(c)=>{const g=
this.construct(d,...b);await this.process(c,g[a.method].bind(g))}))}Dependency(a){return this.dependencies.Describe(a)}Inject(...a){return this.dependencies.Inject(...a)}construct(a,...d){return this.dependencies.construct(a,...d)}addHandler(a,...d){if(this.started)throw Error("To add a new handler the application must be stopped.");const b=e.routes.get(a.prototype.constructor)||[];for(const c of b)switch(c.type){case "filter":this.addFilter(c,a,...d);break;case "processor":this.addProcessor(c,a,
...d)}return this}addService(a,...d){if(this.started)throw Error("To add a new service the application must be stopped.");this.services.push(this.construct(a,...d));return this}start(){if(this.started)throw Error("Application is already initialized.");for(const a of this.services)a.onReceive.subscribe(this.receiveHandler),a.onSend.subscribe(this.sendHandler),a.start();this.started=!0;return this}stop(){if(!this.started)throw Error("Application is not initialized.");for(const a of this.services)a.onReceive.unsubscribe(this.receiveHandler),
a.onSend.unsubscribe(this.sendHandler),a.stop();this.started=!1;return this}static addRoute(a,d){let b;(b=e.routes.get(a))||e.routes.set(a,b=[]);b.push(d)}static Filter(a){return f.bindCallback((d,b,c)=>{if(!(c&&c.value instanceof Function))throw new TypeError("Only methods are allowed for filters.");e.addRoute(d.constructor,{type:"filter",action:a,method:b})})}static Processor(a){return f.bindCallback((d,b,c)=>{if(!(c&&c.value instanceof Function))throw new TypeError("Only methods are allowed for processors.");
e.addRoute(d.constructor,{type:"processor",action:a,method:b})})}};a.routes=new WeakMap;b([f.Private()],a.prototype,"dependencies",void 0);b([f.Private()],a.prototype,"services",void 0);b([f.Private()],a.prototype,"filters",void 0);b([f.Private()],a.prototype,"processors",void 0);b([f.Private()],a.prototype,"started",void 0);b([f.Private()],a.prototype,"receiveHandler",void 0);b([f.Private()],a.prototype,"sendHandler",void 0);b([f.Protected()],a.prototype,"filter",null);b([f.Protected()],a.prototype,
"process",null);b([f.Private()],a.prototype,"protectRequest",null);b([f.Private()],a.prototype,"getRoute",null);b([f.Private()],a.prototype,"addFilter",null);b([f.Private()],a.prototype,"addProcessor",null);b([f.Public()],a.prototype,"Dependency",null);b([f.Public()],a.prototype,"Inject",null);b([f.Public()],a.prototype,"construct",null);b([f.Public()],a.prototype,"addHandler",null);b([f.Public()],a.prototype,"addService",null);b([f.Public()],a.prototype,"start",null);b([f.Public()],a.prototype,"stop",
null);b([f.Private()],a,"routes",void 0);b([f.Private()],a,"addRoute",null);b([f.Public()],a,"Filter",null);b([f.Public()],a,"Processor",null);a=e=b([f.Describe()],a);c.Main=a}},"@singleware/jsx/helper":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,b,c,h){var d=arguments.length,g=3>d?b:null===h?h=Object.getOwnPropertyDescriptor(b,c):h,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,h);else for(var e=a.length-1;0<=e;e--)if(f=a[e])g=
(3>d?f(g):3<d?f(b,c,g):f(b,c))||g;return 3<d&&g&&Object.defineProperty(b,c,g),g};Object.defineProperty(c,"__esModule",{value:!0});var e;"use strict";a=a("@singleware/class");let f=e=class{static create(a,b,...c){if(a instanceof Function)return e.createFromComponent(a,b,...c);if("string"===typeof a)return e.createFromElement(a,b,...c);throw new TypeError(`Unsupported element or component type "${a}"`);}static append(a,...b){for(const d of b)if(d instanceof NodeList||d instanceof Array)e.append(a,...d);
else if(d instanceof Node)a.appendChild(d);else if("string"===typeof d||"number"===typeof d)e.renderer.innerHTML=d,e.append(a,...e.renderer.childNodes);else if(d)if(d.element instanceof Node)a.appendChild(d.element);else throw new TypeError(`Unsupported child type "${d}"`);return a}static clear(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}static createFromComponent(a,b,...c){return(new a(b,c)).element}static createFromElement(a,b,...c){a=document.createElement(a);if(b)for(const d in b)void 0!==
b[d]&&(d in a?a[d]=b[d]:a.setAttribute(d,b[d]));return e.append(a,...c)}};f.renderer=document.createElement("body");b([a.Private()],f,"renderer",void 0);b([a.Public()],f,"create",null);b([a.Public()],f,"append",null);b([a.Public()],f,"clear",null);b([a.Private()],f,"createFromComponent",null);b([a.Private()],f,"createFromElement",null);f=e=b([a.Describe()],f);c.Helper=f}},"@singleware/jsx/index":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});a=a("./helper");c.create=
a.Helper.create;c.append=a.Helper.append;c.clear=a.Helper.clear}},"@singleware/jsx":{pack:!0,invoke:function(c,a){Object.assign(c,a("index"))}},"@singleware/frontend/index":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});var b=a("./main");c.Main=b.Main;a=a("./services");c.Services=a}},"@singleware/frontend":{pack:!0,invoke:function(c,a){Object.assign(c,a("index"))}},"@singleware/frontend/main":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,d,b,
c){var g=arguments.length,f=3>g?d:null===c?c=Object.getOwnPropertyDescriptor(d,b):c,e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,d,b,c);else for(var h=a.length-1;0<=h;h--)if(e=a[h])f=(3>g?e(f):3<g?e(d,b,f):e(d,b))||f;return 3<g&&f&&Object.defineProperty(d,b,f),f};Object.defineProperty(c,"__esModule",{value:!0});const e=a("@singleware/class"),f=a("@singleware/application"),d=a("@singleware/jsx");a=class extends f.Main{constructor(a){super({separator:"/",
variable:/^\{([a-z_0-9]+)\}$/});this.settings=a}async filter(a,d){await super.filter(a,d);0===a.length&&a.detail.granted&&history.pushState(a.variables.state,a.variables.title,a.detail.path)}async process(a,b){const c=a.detail.output;await super.process(a,b);0===a.length&&a.detail.granted&&(c.title&&(document.title=c.title),c.content&&d.append(this.settings.body||document.body,c.content))}};b([e.Private()],a.prototype,"settings",void 0);b([e.Protected()],a.prototype,"filter",null);b([e.Protected()],
a.prototype,"process",null);a=b([e.Describe()],a);c.Main=a}},"@singleware/frontend/services/client":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,b,c,f){var d=arguments.length,g=3>d?b:null===f?f=Object.getOwnPropertyDescriptor(b,c):f,e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,f);else for(var h=a.length-1;0<=h;h--)if(e=a[h])g=(3>d?e(g):3<d?e(b,c,g):e(b,c))||g;return 3<d&&g&&Object.defineProperty(b,c,g),g};Object.defineProperty(c,
"__esModule",{value:!0});const e=a("@singleware/class"),f=a("@singleware/observable");a=class{constructor(a){this.events={receive:new f.Subject,send:new f.Subject};this.settings=a}get onReceive(){return this.events.receive}get onSend(){return this.events.send}start(){this.events.receive.notifyAll({path:this.settings.path||location.pathname,input:{},output:{},environment:{}})}stop(){}};b([e.Private()],a.prototype,"settings",void 0);b([e.Private()],a.prototype,"events",void 0);b([e.Public()],a.prototype,
"onReceive",null);b([e.Public()],a.prototype,"onSend",null);b([e.Public()],a.prototype,"start",null);b([e.Public()],a.prototype,"stop",null);a=b([e.Describe()],a);c.Client=a}},"@singleware/frontend/services/index":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});a=a("./client");c.Client=a.Client}},"@singleware/frontend/services":{pack:!0,invoke:function(c,a){Object.assign(c,a("index"))}},"@singleware/frontend/services/server":{pack:!1,invoke:function(c,a){var b=this&&
this.__decorate||function(a,b,c,f){var d=arguments.length,g=3>d?b:null===f?f=Object.getOwnPropertyDescriptor(b,c):f,e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,f);else for(var h=a.length-1;0<=h;h--)if(e=a[h])g=(3>d?e(g):3<d?e(b,c,g):e(b,c))||g;return 3<d&&g&&Object.defineProperty(b,c,g),g};Object.defineProperty(c,"__esModule",{value:!0});const e=a("@singleware/class"),f=a("@singleware/observable");a=class{constructor(a){this.events={receive:new f.Subject,
send:new f.Subject};this.settings=a}get onReceive(){return this.events.receive}get onSend(){return this.events.send}start(){this.events.receive.notifyAll({path:this.settings.path||location.pathname,input:{},output:{}})}stop(){}};b([e.Private()],a.prototype,"settings",void 0);b([e.Private()],a.prototype,"events",void 0);b([e.Public()],a.prototype,"onReceive",null);b([e.Public()],a.prototype,"onSend",null);b([e.Public()],a.prototype,"start",null);b([e.Public()],a.prototype,"stop",null);a=b([e.Describe()],
a);c.Server=a}},"@singleware/ui-control/component":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,b,c,f){var d=arguments.length,e=3>d?b:null===f?f=Object.getOwnPropertyDescriptor(b,c):f,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(a,b,c,f);else for(var h=a.length-1;0<=h;h--)if(g=a[h])e=(3>d?g(e):3<d?g(b,c,e):g(b,c))||e;return 3<d&&e&&Object.defineProperty(b,c,e),e};Object.defineProperty(c,"__esModule",{value:!0});const e=a("@singleware/class"),
f=a("@singleware/jsx");a=class{constructor(a,b){this.properties=Object.freeze(a||{});this.children=Object.freeze(b||[])}bindDescriptor(a,b){a=Object.getOwnPropertyDescriptor(a,b);if(!a)throw Error(`Property '${b}' was not found.`);return e.bindDescriptor(a)}get element(){return f.create("div",null)}};b([e.Protected()],a.prototype,"properties",void 0);b([e.Protected()],a.prototype,"children",void 0);b([e.Protected()],a.prototype,"bindDescriptor",null);b([e.Public()],a.prototype,"element",null);a=b([e.Describe()],
a);c.Component=a}},"@singleware/ui-control/helper":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,b,c,f){var d=arguments.length,e=3>d?b:null===f?f=Object.getOwnPropertyDescriptor(b,c):f,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(a,b,c,f);else for(var h=a.length-1;0<=h;h--)if(g=a[h])e=(3>d?g(e):3<d?g(b,c,e):g(b,c))||e;return 3<d&&e&&Object.defineProperty(b,c,e),e};Object.defineProperty(c,"__esModule",{value:!0});var e;"use strict";
a=a("@singleware/class");let f=e=class{static listChildByProperty(a,b,c){a=a.assignedNodes();for(const d of a)if(d instanceof HTMLElement&&b in d&&(a=c(d),void 0!==a))return a}static getChildByProperty(a,b){return e.listChildByProperty(a,b,(a)=>a)}static getChildProperty(a,b){return(a=e.getChildByProperty(a,b))?a[b]:void 0}static setChildrenProperty(a,b,c){e.listChildByProperty(a,b,(a)=>{a[b]=c})}static setChildProperty(a,b,c){a=e.getChildByProperty(a,b);if(!a)return!1;a[b]=c;return!0}static assignProperties(a,
b,c){for(const d of c)if(d in b){if(!(d in a))throw Error(`Property '${d}' can't be assigned.`);a[d]=b[d]}}};b([a.Public()],f,"listChildByProperty",null);b([a.Public()],f,"getChildByProperty",null);b([a.Public()],f,"getChildProperty",null);b([a.Public()],f,"setChildrenProperty",null);b([a.Public()],f,"setChildProperty",null);b([a.Public()],f,"assignProperties",null);f=e=b([a.Describe()],f);c.Helper=f}},"@singleware/ui-control/index":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",
{value:!0});var b=a("./component");c.Component=b.Component;a=a("./helper");c.listChildByProperty=a.Helper.listChildByProperty;c.getChildByProperty=a.Helper.getChildByProperty;c.getChildProperty=a.Helper.getChildProperty;c.setChildrenProperty=a.Helper.setChildrenProperty;c.setChildProperty=a.Helper.setChildProperty;c.assignProperties=a.Helper.assignProperties}},"@singleware/ui-control":{pack:!0,invoke:function(c,a){Object.assign(c,a("index"))}},"./form/index":{pack:!1,invoke:function(c,a){Object.defineProperty(c,
"__esModule",{value:!0});a=a("./view");c.View=a.View}},"./form":{pack:!0,invoke:function(c,a){Object.assign(c,a("index"))}},"./form/view":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,b,c,f){var d=arguments.length,e=3>d?b:null===f?f=Object.getOwnPropertyDescriptor(b,c):f,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(a,b,c,f);else for(var h=a.length-1;0<=h;h--)if(g=a[h])e=(3>d?g(e):3<d?g(b,c,e):g(b,c))||e;return 3<d&&e&&Object.defineProperty(b,
c,e),e};Object.defineProperty(c,"__esModule",{value:!0});const e=a("@singleware/class"),f=a("@singleware/jsx");a=a("@singleware/ui-control");a=class extends a.Component{constructor(){super({});this.data={firstName:"",lastName:"",phone:"",email:"",password:"",passwordConfirm:""};this.form=f.create("form",{class:"form"},f.create("div",{class:"form-group"},f.create("label",{for:"firstName"},"First name:"),f.create("input",{id:"firstName",class:"form-control",placeholder:"First name",type:"text",required:!0,
oninput:(a)=>this.handleValidation(a)})),f.create("div",{class:"form-group"},f.create("label",{for:"lastName"},"Last name:"),f.create("input",{id:"lastName",class:"form-control",placeholder:"Last name",type:"text",required:!0,oninput:(a)=>this.handleValidation(a)})),f.create("div",{class:"form-group"},f.create("label",{for:"username"},"Username:"),f.create("input",{id:"username",pattern:"^[_A-z0-9]{1,}$",minlength:"6",placeholder:"Username",class:"form-control",type:"text",oninput:(a)=>this.handleValidation(a)})),
f.create("div",{class:"form-group"},f.create("label",{for:"email"},"Email:"),f.create("input",{id:"email",pattern:"[a-z0-9._%+-]+@juridoc.com.br",placeholder:"Email",class:"form-control",type:"email",oninput:(a)=>this.handleValidation(a)})),f.create("div",{class:"form-group"},f.create("label",{for:"phone"},"Phone:"),f.create("input",{id:"phone",pattern:"^[0-9-\\s?]*$",class:"form-control",placeholder:"Phone",type:"text",oninput:(a)=>this.handleValidation(a)})),f.create("div",{class:"form-group"},
f.create("label",{for:"password"},"Password:"),f.create("input",{id:"password",class:"form-control",placeholder:"Password",type:"password",minlength:"6",oninput:(a)=>this.handleValidation(a)})),f.create("div",{class:"form-group"},f.create("label",{for:"passwordConfirm"},"Confirm password:"),f.create("input",{id:"passwordConfirm",class:"form-control",placeholder:"Confirm password",minlength:"6",type:"password",oninput:(a)=>this.handleValidation(a)})),f.create("div",{align:"right"},f.create("button",
{class:"btn btn-primary",type:"submit"},"Submit form")));this.skeleton=f.create("div",{class:"panel"},f.create("img",{id:"logo",src:"/images/logo-colorful.png"}),this.form);this.form.addEventListener("submit",e.bindCallback(this.submitHandler.bind(this)))}submitHandler(a){a.preventDefault();fetch("https://test.juridoc.com.br/register",{method:"POST",mode:"no-cors",body:JSON.stringify(this.data)}).then((a)=>a.json()).then((a)=>{alert(a.text)}).catch((a)=>{alert(a.message)})}handleValidation(a){this.data[a.target.id]=
a.target.value;"firstName"==a.target.id?a.target.validity.valueMissing?a.target.setCustomValidity("This field cannot be empty"):a.target.setCustomValidity(""):"lastName"==a.target.id?a.target.validity.valueMissing?a.target.setCustomValidity("This field cannot be empty"):a.target.setCustomValidity(""):"username"==a.target.id?6>a.target.value.length?a.target.setCustomValidity("Must have at least 6 digits"):a.target.validity.patternMismatch?a.target.setCustomValidity("No special characters are allowed"):
a.target.setCustomValidity(""):"phone"==a.target.id?a.target.validity.patternMismatch?a.target.setCustomValidity("Only numbers, whitespaces and dash are allowed"):a.target.setCustomValidity(""):"password"==a.target.id?6>this.data.password.length?a.target.setCustomValidity("Must have at least 6 digits"):a.target.setCustomValidity(""):"passwordConfirm"==a.target.id?(console.log(a.target.value),0==this.data.password.length?a.target.setCustomValidity("You must fill the previous field"):6>this.data.passwordConfirm.length?
a.target.setCustomValidity("Must have at least 6 digits"):a.target.value!=this.data.password?a.target.setCustomValidity("Passwords don't match"):a.target.setCustomValidity("")):"email"==a.target.id&&(a.target.validity.patternMismatch?a.target.setCustomValidity("No special characters are allowed. Also, it must be at juridoc.com.br"):a.target.setCustomValidity(""))}get element(){return this.skeleton}};b([e.Private()],a.prototype,"submitHandler",null);b([e.Private()],a.prototype,"form",void 0);b([e.Private()],
a.prototype,"skeleton",void 0);b([e.Public()],a.prototype,"element",null);a=b([e.Describe()],a);c.View=a}},"./main":{pack:!1,invoke:function(c,a){Object.defineProperty(c,"__esModule",{value:!0});const b=a("@singleware/frontend");a=a("./handler");c.application=new b.Main({});c.application.addService(b.Services.Client,{});c.application.addHandler(a.Handler);c.application.start()}},"./handler":{pack:!1,invoke:function(c,a){var b=this&&this.__decorate||function(a,b,c,d){var f=arguments.length,e=3>f?b:
null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])e=(3>f?g(e):3<f?g(b,c,e):g(b,c))||e;return 3<f&&e&&Object.defineProperty(b,c,e),e};Object.defineProperty(c,"__esModule",{value:!0});const e=a("@singleware/class"),f=a("@singleware/frontend"),d=a("./form");a=class{async defaultAction(a){a.detail.output.content=new d.View}};b([e.Public(),f.Main.Processor({path:"/"})],
a.prototype,"defaultAction",null);a=b([e.Describe()],a);c.Handler=a}}},p={};l.baseDirectory=".";l.require=(c)=>{var a=c.substr(0,1);a="/"!==a&&"@"!==a;c=q(a?`${l.baseDirectory}/${c}`:c);if(!p[c]){a:{a=A[c];if(!a)throw Error(`Module "${c}" does not found.`);const e={},f=l.baseDirectory;try{if(a.pack)var b=c;else{{const a=q(c).split("/");b=a.splice(0,a.length-1).join("/")}}l.baseDirectory=b;a.invoke(e,l.require)}catch(d){throw d;}finally{l.baseDirectory=f;b=e;break a}}p[c]=b}return p[c]};window.require||
(window.require=l.require)})(Loader||(Loader={}));
